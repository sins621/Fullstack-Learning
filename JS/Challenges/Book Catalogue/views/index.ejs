<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Books</title>
    <link rel="stylesheet" href="./styles/main.css" />
  </head>

  <body>
    <header>
      <div class="titlebar">
        <div>
          <a href="#">
            <img src="./img/logo/Logo_Cropped.png" width="100" />
          </a>
        </div>

        <div class="nav">
          <nav>
            <a href="#">About</a>
            <a href="#">Contact</a>
            <a href="/add">Add</a>
          </nav>
        </div>
      </div>
    </header>
    <hr />
    <div class="categories">
      <ul>
        <% if (locals.categories) { %> <% categories.forEach((category) => { %>
        <li><%= category %></li>
        <% }); %> <% } %>
      </ul>
    </div>
    <div>
      <main>
        <% if (locals.books && locals.categories) { %> <%
        categories.forEach((category)=> { %> <% if (books.some(book=>
        book.category === category)) { %>
        <h1 id="section-heading"><%= category %></h1>
        <div>
          <% books.forEach((book)=> { %> <% if (book.category==category) { %>
          <div>
            <div>
              <img
                src="https://covers.openlibrary.org/b/id/<%= book.cover_id %>-M.jpg"
              />
              <h5><%= book.title %></h5>
              <h6><%= book.author %> <%= book.publish_year %></h6>
              <p>
                <strong>R<%= book.price %></strong><br />
                <%= book.abstract %>
              </p>
            </div>
          </div>
          <% } %> <% }); %>
        </div>
        <%} %> <% }); %> <% } %>
      </main>
    </div>
    <footer>
      <div>
        <p>This is the footer</p>
      </div>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
